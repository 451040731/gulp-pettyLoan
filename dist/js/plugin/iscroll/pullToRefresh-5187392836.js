var refresher={info:{pullDownLable:"下拉刷新...",pullingDownLable:"释放刷新...",pullUpLable:"上滑加载更多...",pullingUpLable:"释放加载...",loadingLable:"Loading..."},init:function(e){var l=document.getElementById(e.id),n=document.createElement("div");n.id="scroller",l.appendChild(n);var r=document.getElementById("scroller"),o=document.querySelector("#"+e.id+" .dataContainer");r.insertBefore(o,r.childNodes[0]);var a=document.createElement("div");a.id="pullDown",(s=document.createElement("div")).className="loader";for(var t=0;t<4;t++){var i=document.createElement("span");s.appendChild(i)}a.appendChild(s);var c=document.createElement("div");c.className="pullDownLabel",a.appendChild(c),r.insertBefore(a,r.childNodes[0]);var s,p=document.createElement("div");p.id="pullUp",(s=document.createElement("div")).className="loader";for(t=0;t<4;t++){i=document.createElement("span");s.appendChild(i)}p.appendChild(s);var d=document.createElement("div");d.className="pullUpLabel";var u=document.createTextNode(refresher.info.pullUpLable);d.appendChild(u),p.appendChild(d),r.appendChild(p);var m=document.getElementById("pullDown"),f=m.offsetHeight,h=document.getElementById("pullUp"),y=h.offsetHeight;this.scrollIt(e,m,f,h,y)},scrollIt:function(e,l,n,r,o){myScroll=new iScroll(e.id,{useTransition:!0,vScrollbar:!1,topOffset:n,onRefresh:function(){refresher.onRelease(l,r)},onScrollMove:function(){refresher.onScrolling(this,l,r,o)},onScrollEnd:function(){refresher.onPulling(l,e.pullDownAction,r,e.pullUpAction)}}),setTimeout(function(){l.querySelector(".pullDownLabel").innerHTML=refresher.info.pullDownLable},300),document.addEventListener("touchmove",function(e){e.preventDefault()},!1)},onScrolling:function(e,l,n,r){e.y>-r&&(l.className="",l.querySelector(".pullDownLabel").innerHTML=refresher.info.pullDownLable,e.minScrollY=-r),0<e.y?(l.className="flip",l.querySelector(".pullDownLabel").innerHTML=refresher.info.pullingDownLable,e.minScrollY=0,$("body").removeClass("refresh")):$("body").addClass("refresh"),(e.scrollerH<e.wrapperH&&e.y<e.minScrollY-r||e.scrollerH>e.wrapperH&&e.y<e.maxScrollY-r)&&(document.getElementById("pullUp").style.display="block",n.className="flip",n.querySelector(".pullUpLabel").innerHTML=refresher.info.pullingUpLable),(e.scrollerH<e.wrapperH&&e.y>e.minScrollY-r&&n.className.match("flip")||e.scrollerH>e.wrapperH&&e.y>e.maxScrollY-r&&n.className.match("flip"))&&(document.getElementById("pullUp").style.display="none",n.className="",n.querySelector(".pullUpLabel").innerHTML=refresher.info.pullUpLable)},onRelease:function(e,l){e.className.match("loading")&&(e.className="",e.querySelector(".pullDownLabel").innerHTML=refresher.info.pullDownLable,e.querySelector(".loader").style.display="none",e.style.lineHeight=e.offsetHeight+"px"),l.className.match("loading")&&(l.className="",l.querySelector(".pullUpLabel").innerHTML=refresher.info.pullUpLable,l.querySelector(".loader").style.display="none",l.style.lineHeight=e.offsetHeight+"px")},onPulling:function(e,l,n,r){e.className.match("flip")&&(e.className="loading",e.querySelector(".pullDownLabel").innerHTML=refresher.info.loadingLable,e.querySelector(".loader").style.display="block",e.style.lineHeight=".3rem",l&&l()),n.className.match("flip")&&(n.className="loading",n.querySelector(".pullUpLabel").innerHTML=refresher.info.loadingLable,n.querySelector(".loader").style.display="block",n.style.lineHeight=".3rem",l&&r())}};